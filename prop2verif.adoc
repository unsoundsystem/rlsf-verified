= 検証の対象とする性質・仕様

== assumptions

* RefinedRustにおけるMIR/Radiumの操作的意味論の適切さ
* 検証時に用いるlayout algorithmの適切さ
* ビット操作などRust以外(e.g. llvm intrinsics)で実装されている部分

== 証明すると良さそうな性質

=== APIとして

* RustのAllocator APIに要求される仕様
    ** https://doc.rust-lang.org/std/alloc/trait.GlobalAlloc.html
    ** https://doc.rust-lang.org/std/alloc/trait.Allocator.html

=== 内部構造に言及する仕様

* index計算
    ** 安全性
    ** 正当性はfreelist invariantに含まれる
* freelist invariant
    ** すべてのfreelistはsentinelを持つ
    ** すべてのfreelistには規定サイズ範囲のブロックしかない
    ** bitmapの更新状況がfreelistの状態と整合している
* free blockは隣接しない ref. `// Invariant: No two adjacent free blocks`
* alignment
* validな領域(?)を対象としていれば初期化(e.g. `insert_free_block`)は成功する
    ** validな領域
        *** 非null
        *** Tlsfより長いライフタイムを持つ
        *** validな領域からキャストされた領域
* 要求されたサイズ(+alignment+header)を満たすエントリが存在すれば、割当は成功する
* 指定されたアドレスに対応するused headerが存在すれば、開放は成功する
* 割当済みの領域と未割り当ての領域は非交和

== references

* https://github.com/yvt/rlsf/blob/main/crates/rlsf/src/tlsf/tests.rs
* https://github.com/PrincetonUniversity/DeepSpecDB/blob/master/memmgr/README.txt
* Zhang, Y., Zhao, Y., Sanan, D., Qiao, L., & Zhang, J. (2019). A verified specification of TLSF memory management allocator using state monads. In Dependable Software Engineering. Theories, Tools, and Applications: 5th International Symposium, SETTA 2019, Shanghai, China, November 27–29, 2019, Proceedings 5 (pp. 122-138). Springer International Publishing.
